\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{gray}[2025/04/15 the gray package]

% gray colors
\RequirePackage{color}
\RequirePackage{xcolor}

% shades of gray: https://en.wikipedia.org/wiki/Shades_of_gray
\definecolor{lotion}{HTML}{FAFAFA}
\definecolor{whitesmoke}{HTML}{F5F5F5}
\definecolor{brightgray}{HTML}{ECECEC}
% \definecolor{platium}{HTML}{E5E4E2}
\definecolor{gainsboro}{HTML}{DCDCDC}
\definecolor{lightgray}{HTML}{D3D3D3}
\definecolor{silver}{HTML}{C0C0C0}
\definecolor{mediumgray}{HTML}{BEBEBE}
\definecolor{darkgray}{HTML}{A9A9A9}
\definecolor{gray}{HTML}{808080}
\definecolor{spanishgray}{HTML}{989898}
\definecolor{davygray}{HTML}{555555}
\definecolor{tundora}{HTML}{404040}


% hyperlinks and references
\RequirePackage{hyperref}
\hypersetup{
    colorlinks=true,
    breaklinks=true,
    linkcolor=tundora,
    urlcolor=tundora,
    citecolor=tundora,
    % allbordercolors=gray,
    % citebordercolor=gray,
    % filebordercolor=gray,
    % linkbordercolor=gray,
}
\usepackage{caption}

% for breakable underline \ul{}
\usepackage{soul}


% math
\RequirePackage[tbtags]{amsmath}
\RequirePackage{amsthm}
\RequirePackage{amssymb}
\RequirePackage{amsfonts}
% Make typesetting math equations simpler and faster, especially for vectors and matrices
\RequirePackage{physics}

\RequirePackage{tcolorbox}
\tcbuselibrary{theorems,skins,breakable}

\RequirePackage{xargs}
\RequirePackage{keyval}
\RequirePackage{xkeyval}
\RequirePackage{pgfkeys}
%
\RequirePackage{ifthen}

\RequirePackage{empheq}
\RequirePackage{mathtools}
\RequirePackage{cleveref}


% inline burger
\newtcbox{\burger}[1][black]{
    on line,
    enhanced jigsaw,
    opacityback=0,
    arc=0pt,
    outer arc=0pt,
    colframe=#1,
    boxsep=0pt,
    left=1pt,
    right=1pt,
    top=3pt,
    bottom=2pt,
    boxrule=0pt,
    bottomrule=1pt,
    toprule=1pt
}

% inline cell
\newtcbox{\cell}[1][black]{
    enhanced jigsaw,
    sharp corners,
    nobeforeafter,
    tcbox raise base,
    opacityback=0,
    colframe=#1,
    boxrule=1pt,
    before upper={\rule[-3pt]{0pt}{10pt}},
    boxsep=0pt,
    left=5pt,
    right=5pt,
    top=3pt,
    bottom=2pt
}

% display jail
\newtcbox{\jail}[1][black]{
    enhanced jigsaw,
    sharp corners,
    nobeforeafter,
    tcbox raise base,
    opacityback=0,
    colframe=#1,
    boxrule=1pt,
}

% \mathjail{} in aligned math environment
\MakeAboxedCommand\mathjail\jail

\newenvironment{equationjail}{\empheq[box=\jail]{equation}}{\endempheq}
\newenvironment{alignjail}{\empheq[box=\jail]{align}}{\endempheq}



\tcbset{
    DefaultStyle/.style={
        enhanced,
        fonttitle=\sffamily\bfseries\large,
        titlerule=0pt,
        toptitle=2pt,
        bottomtitle=2pt,
        left=4pt,
        right=4pt,
        arc=4pt
    },
    DefinitionStyle/.style={
        enhanced,
        sharp corners,
        lowerbox=ignored,
        before upper={\parskip0.5\baselineskip},
        separator sign={\ },
        fonttitle=\bfseries\large,
        colback=whitesmoke,
        colframe=darkgray,
        colbacktitle=gainsboro,
        coltitle=black,
        parbox=false,
        arc=1pt,
        boxsep=0.4em,
        boxrule=0pt,
        titlerule=0pt,
        toptitle=0.3em,
        bottomtitle=0.2em,
        left=0.2em,
        right=0.2em,
    },
    TheoremStyle/.style={
        enhanced,
        breakable,
        fonttitle=\bfseries\large,
        lower separated=false,
        colback=whitesmoke,
        colframe=darkgray,
        colbacktitle=gainsboro,
        coltitle=black,
        arc=1pt,
        titlerule=0pt,
        toptitle=0.3em,
        bottomtitle=0.2em,
        left=0.2em,
        right=0.2em,
        before upper={\parskip0.5\baselineskip},
        % before lower={\parskip0.5\baselineskip\textsf{\textbf{Proof:}}\ },
        % after lower={\hfill$\qed$},
    },
    ExampleStyle/.style={
        theorem style=plain,
        breakable,
        lower separated=false,
        attach title to upper={\quad},
        fonttitle={\bfseries\normalsize},
        description delimiters parenthesis,
        description color=black,
        description font={\rmfamily\bfseries},
        separator sign={\ },
        terminator sign none,
        arc=1pt,
        boxrule=0pt,
        left=0.2em,
        right=0.2em,
        middle=3mm,
        colback=lotion,
        colframe=darkgray,
        colbacktitle=brightgray,
        coltitle=black,
        before upper={\parskip0.5\baselineskip\tcbtitle\quad},
        % before lower={\parskip0.5\baselineskip\textsf{\textbf{Solution:}}\ }
    },
    ProblemStyle/.style={
        theorem style=plain,
        breakable,
        before upper={\parskip0.5\baselineskip},
        sharp corners,
        lowerbox=ignored,
        coltitle=black,
        colback=white,
        boxrule=0pt,
        left=0pt, right=0pt,
        fonttitle={\sffamily\bfseries},
        separator sign={},
        description delimiters none,
        description color=black,
        description font={\rmfamily\bfseries\slshape},
        terminator sign={.},
    }
}





% Proof
\makeatletter
\renewenvironment{proof}[1][\proofname]{%
\par\pushQED{\qed}\normalfont\topsep6\p@\@plus6\p@\relax\trivlist\item[\hskip\labelsep\bfseries#1\@addpunct{.}]\ignorespaces}{\popQED\endtrivlist\@endpefalse}
\makeatother
